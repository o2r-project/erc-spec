<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Daniel Nüst, Marc Schutzeichel, Markus Konkol">
  <link rel="canonical" href="https://o2r.info/erc-spec/user-guide/creation/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Creation guide for authors - Executable Reserach Compendium (ERC) Specification</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../erc.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Creation guide for authors";
    var mkdocs_page_input_path = "user-guide/creation.md";
    var mkdocs_page_url = "/erc-spec/user-guide/creation/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Executable Reserach Compendium (ERC) Specification</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../spec/">ERC specification</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">User guides</span></p>
                <ul class="current">
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Creation guide for authors</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#step-1-create-workspace">Step 1: create workspace</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#code-and-versioning">Code and versioning</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#workspace-structure">Workspace structure</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#step-2-create-image-container-for-runtime">Step 2: create image container for runtime</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#step-3-create-metadata">Step 3: create metadata</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#erc-metadata">ERC metadata</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#license-metadata">License metadata</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#content-metadata">Content metadata</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#secondary-metadata">Secondary metadata</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#step-4-validate">Step 4: validate</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#step-5-create-bag">Step 5: create bag</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#third-party-tools-for-creating-bagit-bags">Third party tools for creating BagIt bags</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#creating-the-bag">Creating the bag</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#validating-the-bag">Validating the bag</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../examination/">Examination guide for readers and reviewers</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../template/">ERC template for authors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../minimal/">Minimal ERC examples</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../oais/">ERC & OAIS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../erc_journal_supplement/">ERC as supplement</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../dev-guide/">Developer guide</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/">Support</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Executable Reserach Compendium (ERC) Specification</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>User guides &raquo;</li>
        
      
    
    <li>Creation guide for authors</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/o2r-project/erc-spec/tree/master/docs/user-guide/creation.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="user-guide-erc-creation">User guide: ERC creation<a class="headerlink" href="#user-guide-erc-creation" title="Permanent link">&para;</a></h1>
<p>This user guide comprises instructions how to create an ERC <em>by hand</em>.
It is thus limited to mandatory elements in some places.
However, a fundamental goal of the ERC specification is to be simple enough to allow manual ERC creation as demonstrated in this document.
It is supposed to ease the understanding of the ERC especially for the authors of scientific publications.
For using tools or services for creation and validation of ERCs, please see the <a href="../../dev-guide/">developer guide</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a draft.
If you have comments or suggestions please file them in the <a href="https://github.com/o2r-project/erc-spec/issues">issue tracker</a>.
If you have explicit changes please fork the <a href="https://github.com/o2r-project/erc-spec">git repo</a> and submit a pull request.</p>
</div>
<h2 id="step-1-create-workspace">Step 1: create workspace<a class="headerlink" href="#step-1-create-workspace" title="Permanent link">&para;</a></h2>
<p><em>Do your research and create something useful that works for you.</em>
The ERC specification makes no restrictions on the contents of a workspace, but guidelines and best practices do exist and should be followed by users during their research i.e. even before packaging it in an ERC.</p>
<h3 id="code-and-versioning">Code and versioning<a class="headerlink" href="#code-and-versioning" title="Permanent link">&para;</a></h3>
<p>If the base directory contains a script file or source code used to conduct the packaged analysis, we recommend this code is managed using <a href="https://en.wikipedia.org/wiki/Distributed_version_control">distributed version control</a>, see <a href="https://github.com/swcarpentry/good-enough-practices-in-scientific-computing/blob/gh-pages/index.md#keeping-track-of-changes">software carpentry guidelines</a>.
The base directory should contain a copy of the complete repository in that case.</p>
<h3 id="workspace-structure">Workspace structure<a class="headerlink" href="#workspace-structure" title="Permanent link">&para;</a></h3>
<p>The base directory contents should follow common guidelines to project organisation.
Some useful resources are</p>
<ul>
<li><a href="https://github.com/swcarpentry/good-enough-practices-in-scientific-computing/blob/gh-pages/index.md#project-organization">Software carpentry paper &ldquo;Good enough practices in Scientific Computing&rdquo;</a></li>
<li><a href="https://github.com/ropensci/rrrpkg">ROpenSci research compendium</a>).</li>
<li><a href="https://ropensci.github.io/reproducibility-guide/sections/introduction">ROpenSci reproducibility guide</a></li>
</ul>
<h2 id="step-2-create-image-container-for-runtime">Step 2: create image container for runtime<a class="headerlink" href="#step-2-create-image-container-for-runtime" title="Permanent link">&para;</a></h2>
<p>To create a working ERC you must include a complete environment description and an executable image.</p>
<p>We recommend using Docker, so a Dockerfile and a Docker image tarball archive file, to achieve these goals.</p>
<p>See the <a href="../../spec/#runtime-manifest-and-image">runtime manifest and image</a> for detailed requirements.</p>
<p>Practically speaking, our tool <a href="https://o2r.info/containerit/"><code>containerit</code></a> may help you in creating a first Dockerfile and then make necessary adjustments, e.g. installing a dependency from an unsupported source.
It is important that the Dockerfile includes a command that creates the display file from the main file, i.e. executing the workflow and rendering of the output document, and uses a suitable working directory within the container.
The working directory is important to support features such as file substitution.</p>
<p>The following <code>Dockerfile</code> snippet switches to the required working <code>/erc</code> directory and uses <code>rmarkdown::render(..)</code> to generate the display file <code>display.html</code> (output to the working directory, just to be sure) from the main file <code>main.Rmd</code>.</p>
<div class="highlight"><pre><span></span><code><span class="k">WORKDIR</span><span class="s"> /erc/</span>
<span class="k">CMD</span> <span class="o">[</span><span class="s2">&quot;R&quot;</span>, <span class="s2">&quot;--vanilla&quot;</span>, <span class="s2">&quot;-e&quot;</span>, <span class="s2">&quot;rmarkdown::render(</span>
    <span class="nv">input</span> <span class="o">=</span> <span class="se">\&quot;</span>/erc/main.Rmd<span class="se">\&quot;</span>,
    <span class="nv">output_format</span> <span class="o">=</span> rmarkdown::html_document<span class="o">()</span>,
    <span class="nv">output_dir</span> <span class="o">=</span> <span class="se">\&quot;</span>/erc<span class="se">\&quot;</span>,
    <span class="nv">output_file</span> <span class="o">=</span> <span class="se">\&quot;</span>display.html<span class="se">\&quot;</span><span class="o">)</span><span class="s2">&quot;]</span>
</code></pre></div>
<h2 id="step-3-create-metadata">Step 3: create metadata<a class="headerlink" href="#step-3-create-metadata" title="Permanent link">&para;</a></h2>
<h3 id="erc-metadata">ERC metadata<a class="headerlink" href="#erc-metadata" title="Permanent link">&para;</a></h3>
<p>Structural &amp; administrative metadata must be put into the ERC configuration file <code>erc.yml</code> as defined in the <a href="../../spec/#erc-configuration-file">specification</a>.</p>
<p>When creating the erc manually, you can receive a uuid4 as <code>id</code> for the erc configuration file using an online service, e.g. <a href="https://www.uuidgenerator.net/version4">uuidgenerator</a> or one of the numerous implementations for the common programming languages.</p>
<h3 id="license-metadata">License metadata<a class="headerlink" href="#license-metadata" title="Permanent link">&para;</a></h3>
<p>Please consult your employer or legal department for a suitable license for your work.
Make sure you hold the copyright for any code that you want to release under a self-chosen license and that the license is compatible with the conditions of licenses of used data or software.</p>
<p>A good discussion of the legal aspects of reproducible research is given in Victoria Stodden&rsquo;s <a href="https://aip.scitation.org/doi/pdf/10.1109/MCSE.2009.19">&ldquo;The Legal Framework for Reproducible Scientific Research: Licensing and Copyright&rdquo;</a> (<a href="https://web.stanford.edu/~vcs/papers/LFRSR12012008.pdf">public preprint</a>) .</p>
<p>Further resources that are linked here without any endorsement or being checked:</p>
<ul>
<li><a href="https://choosealicense.com">choosealicense.com</a> (for code)</li>
<li><a href="http://opendefinition.org">opendefinition.org</a> (for code, data, text)</li>
<li><a href="https://speakerdeck.com/labarba/a-short-lecture-on-open-licensing">A short lecture on Open Licensing by Lorena A. Barba</a></li>
</ul>
<p>License information must be put into the ERC configuration file <code>erc.yml</code> as defined in the <a href="../../spec/#erc-configuration-file">specification</a>.</p>
<h3 id="content-metadata">Content metadata<a class="headerlink" href="#content-metadata" title="Permanent link">&para;</a></h3>
<p>Content metadata are used for making your work findable.
Properties for the content metadata are defined in the <a href="../../spec/#content-metadata">specification</a> and must be put into the <code>metadata.json</code> file.</p>
<h3 id="secondary-metadata">Secondary metadata<a class="headerlink" href="#secondary-metadata" title="Permanent link">&para;</a></h3>
<p><em>As of now, we do not recommend creating secondary metadata by hand.</em></p>
<p>Secondary metadata are used for third party services, e.g. repositories that define their own obligatory metadata.
In general they can be added in different formats to support different use cases and they should be stored in a directory <code>.erc</code>.</p>
<p>More information on secondary metadata can be found in the <a href="../../spec/#preservation-of-erc">preservation section</a>.</p>
<h2 id="step-4-validate">Step 4: validate<a class="headerlink" href="#step-4-validate" title="Permanent link">&para;</a></h2>
<p>You can use the container created in step 2 for validation purposes, too.
Run the analysis in the container, then copy the analysis output to a temporary directory on the host system, and finally compare the original workspace and the temporary directory according the <a href="../../spec/#validation">validation rules</a> to ensure a complete replication.</p>
<h2 id="step-5-create-bag">Step 5: create bag<a class="headerlink" href="#step-5-create-bag" title="Permanent link">&para;</a></h2>
<p>To create a package that is suitable for being stored in an archive or repository, ERCs must be bundled as BagIt bags.
Take a look at the <a href="../../spec/#preservation-of-erc">preservation section</a> for a detailed background about the purpose of BagIt and other digital preservation aspects.</p>
<h3 id="third-party-tools-for-creating-bagit-bags">Third party tools for creating BagIt bags<a class="headerlink" href="#third-party-tools-for-creating-bagit-bags" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://github.com/LibraryOfCongress/bagger">Bagger</a> (version 2.7, Java-based, with UI)</li>
<li><a href="https://libraryofcongress.github.io/bagit-python/">bagit-python</a> (Python package)</li>
</ul>
<h3 id="creating-the-bag">Creating the bag<a class="headerlink" href="#creating-the-bag" title="Permanent link">&para;</a></h3>
<p>In this guide we will create the bag manually by using the Library of Congress&rsquo;s (LoC) tool <em>Bagger</em>, listed above.</p>
<ol>
<li>Start by selecting &ldquo;Create new bag&rdquo; from the main menu and proceed with &ldquo;&lt;no profile&gt;&ldquo;.</li>
<li>Add your files with the &ldquo;+&rdquo; Button.</li>
<li>Uncheck the &ldquo;Standard&rdquo; feature in the Bag-Info-Editor on the right and add <code>ERC-Version</code> with the appropriate version you want to use, e.g. <code>1</code>. Optionally fill out additional Bag-Info metadata, e.g. <em>contact information</em>.</li>
<li>Save your bag using the main menu.</li>
</ol>
<h3 id="validating-the-bag">Validating the bag<a class="headerlink" href="#validating-the-bag" title="Permanent link">&para;</a></h3>
<p>A file tree for the final bagged ERC may look like this:</p>
<div class="highlight"><pre><span></span><code>├── bag-info.txt
├── bagit.txt
├── data
│   ├── .erc/metadata.json
│   ├── erc.yml
│   ├── manuscript.Rmd
│   ├── display.html
│   ├── Dockerfile
│   └── image.tar
├── manifest-md5.txt
└── tagmanifest-md5.txt
</code></pre></div>
<p>You can validate your bag with <em>Bagger</em> by loading the bag and then clicking on &ldquo;Validate Bag&rdquo; in the main menu.
The programme will check for completeness of BagIt-related files and verify the integrity of the data files by computing their checksums (hashes) and report any potential issues.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../examination/" class="btn btn-neutral float-right" title="Examination guide for readers and reviewers">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../glossary/" class="btn btn-neutral" title="Glossary"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Licensed under Creative Commons CC0 1.0 Universal License.</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/o2r-project/erc-spec/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../../glossary/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../examination/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
