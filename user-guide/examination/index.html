<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Daniel Nüst, Marc Schutzeichel, Markus Konkol">
  <link rel="canonical" href="https://o2r.info/erc-spec/user-guide/examination/">
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Examination guide for readers and reviewers - Executable Reserach Compendium (ERC) Specification</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700" />

  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
  <link href="../../erc.css" rel="stylesheet" />
  
  <script>
    // Current page data
    var mkdocs_page_name = "Examination guide for readers and reviewers";
    var mkdocs_page_input_path = "user-guide/examination.md";
    var mkdocs_page_url = "/erc-spec/user-guide/examination/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Executable Reserach Compendium (ERC) Specification</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../..">Home</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../spec/">ERC specification</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../glossary/">Glossary</a>
                    </li>
                </ul>
                <p class="caption"><span class="caption-text">User guides</span></p>
                <ul class="current">
                    <li class="toctree-l1"><a class="reference internal" href="../creation/">Creation guide for authors</a>
                    </li>
                    <li class="toctree-l1 current"><a class="reference internal current" href="./">Examination guide for readers and reviewers</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#ui-based">UI-based</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#manual">Manual</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#download-and-extract">Download and extract</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#validate">Validate</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#examine">Examine</a>
        <ul>
    <li class="toctree-l4"><a class="reference internal" href="#inspect">Inspect</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#examine-runtime">Examine runtime</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#check">Check</a>
    </li>
    <li class="toctree-l4"><a class="reference internal" href="#manipulate-substitute">Manipulate &amp; substitute</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#detailed-examination-of-code-and-text">Detailed examination of code and text</a>
    </li>
        </ul>
    </li>
    </ul>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../template/">ERC template for authors</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../minimal/">Minimal ERC examples</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../oais/">ERC & OAIS</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../erc_journal_supplement/">ERC as supplement</a>
                    </li>
                    <li class="toctree-l1"><a class="reference internal" href="../../dev-guide/">Developer guide</a>
                    </li>
                </ul>
                <ul>
                    <li class="toctree-l1"><a class="reference internal" href="../../support/">Support</a>
                    </li>
                </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Executable Reserach Compendium (ERC) Specification</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>User guides &raquo;</li>
        
      
    
    <li>Examination guide for readers and reviewers</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/o2r-project/erc-spec/tree/master/docs/user-guide/examination.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>

          <div role="main">
            <div class="section">
              
                <h1 id="user-guide-erc-examination">User guide: ERC examination<a class="headerlink" href="#user-guide-erc-examination" title="Permanent link">&para;</a></h1>
<p>An Executable Research Compendium (ERC) can be examined using a supporting <a href="#ui-based">user interface</a> or, in lack of such a tool or for higher control, <a href="#manually">manually</a>.</p>
<h2 id="ui-based">UI-based<a class="headerlink" href="#ui-based" title="Permanent link">&para;</a></h2>
<p>The o2r platform provides an interactive user interface for <strong>examination of an ERC</strong>.
The right-hand side of the start page provides a form to load a complete executable research compendium.</p>
<p><img alt="Screenshot of o2r platform home page" src="/img/user-guide/examine-form.jpg" /></p>
<p class="caption">Screenshot of o2r platform: home page.</p>

<p>The following sources and identifiers are supported:</p>
<ul>
<li>an <em>identifier of an ERC</em> available in the reproducibility service at hand</li>
<li>a <em>DOI</em> or <em>full repository URL</em> of a supported data repository</li>
<li>a <em>repository-specific identifier</em> of a supported data repository</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The demonstrator is only configured to ship (store) ERC to <a href="https://sandbox.zenodo.org/">Zenodo <em>Sandbox</em></a>, therefore examination starting from DOIs is not commonly available because Zenodo Sandbox does not provide valid DOIs.
A user may upload a valid compendium to &ldquo;regular&rdquo; Zenodo manually and then examine via a DOI.</p>
</div>
<p>Currently you must be locked in, as other security mechanisms are out of scope of the demonstration prototype.</p>
<p><img alt="Screenshot of o2r platform home page" src="/img/user-guide/examine-form-filled-loggedin.jpg" /></p>
<p class="caption">Screenshot of o2r platform: home page with logged-in user and filled out examination form.</p>

<p>After loading the ERC from the reproducibility service&rsquo;s database and file cache or from the data repository, you are taken to a compendium landing page and can continue with different <strong>aspects of examination</strong>:</p>
<p><img alt="Screenshot of ERC landing page" src="/img/user-guide/examine-erc.jpg" /></p>
<p class="caption">Screenshot of o2r platform: ERC detail page, the "green" comparison button points out a successful reproduction.</p>

<ul>
<li><strong>check</strong> to run an analysis, i.e. ensure computational reproducibility</li>
<li><strong>inspect</strong> to closely evaluate core code and data files</li>
<li><strong>manipulate</strong> to adjust selected parameters when executing the computations</li>
<li><strong>substitute</strong> to switch out data or code files re-run computations</li>
</ul>
<p>Check, manipulation, and substitution allow readers to interact with the packaged workflow.
Manipulation options are based on the <em>bindings</em> provided as part of the compendium.
All these interactions result in a new output, the <em>reproduced display file</em>. It can be compared with the original display file included in the compendium.
The following screenshot shows the visual aid for comparison provided by the UI.</p>
<p><img alt="Screenshot of ERC check comparison" src="/img/user-guide/examine-erc-compare.jpg" /></p>
<p class="caption">Screenshot of o2r platform: check comparison view with differences in figure highlighted, e.g. after substitution or manipulation.</p>

<p>Furthermore you can examine the log files of the execution in the job log on the right hand side.</p>
<h2 id="manual">Manual<a class="headerlink" href="#manual" title="Permanent link">&para;</a></h2>
<p><a href="https://en.wikipedia.org/wiki/Nothing_Lasts_Forever">Nothing lasts forever</a>.
While it is reasonable to assume that an ERC-based publication workflow is maintainable for some time (cf. <a href="/dev-guide/#lifespan">developer guide on ERC lifespan</a>, the ERC concept also supports a manual examination.
The ready-to-use user interface provided by the o2r project provides user-friendliness and shortcuts, but the same results can be achieved manually.
Of course this requires a higher level of expertise in the underlying tools.</p>
<p>The following sections mimic the steps conducted by the reproducibility service to load and examine a valid ERC.</p>
<h3 id="download-and-extract">Download and extract<a class="headerlink" href="#download-and-extract" title="Permanent link">&para;</a></h3>
<p>Download the ERC from a data repository to your local machine.</p>
<p><img alt="Screenshot of ERC check comparison" src="/img/user-guide/zenodo-record.jpg" /></p>
<p class="caption">Screenshot of Zenodo record landing page with preview of contents of the downloadable archive file, in this case `PPhqW.zip`.</p>

<p>Then extract the archive.
You may familiarise yourself with the <a href="https://en.wikipedia.org/wiki/BagIt#Specification">BagIt specification</a>, but you mostly just need to open the payload directory, <code>data</code>, in the extracted bag.</p>
<h3 id="validate">Validate<a class="headerlink" href="#validate" title="Permanent link">&para;</a></h3>
<p>The following checks can be made to ensure an ERC is valid:</p>
<ul>
<li>presence of mandatory files in the payload directory: <code>erc.yml</code>, <code>Dockerfile</code>, <code>image.tar(.gz)</code></li>
<li>the whole bag is valid, check e.g. with the <a href="https://pypi.org/project/bagit/"><code>bagit</code> Python library</a></li>
</ul>
<h3 id="examine">Examine<a class="headerlink" href="#examine" title="Permanent link">&para;</a></h3>
<h4 id="inspect">Inspect<a class="headerlink" href="#inspect" title="Permanent link">&para;</a></h4>
<p>Open the file <code>erc.yml</code> with a text viewer.
It is the entrypoint to an ERC both for software tools and humans.
The most important information in it is which files are the <em>main file</em> and the <em>display file</em>.
Open the main file in a suitable viewer, e.g. a web browser for an HTML file, and the display file in a suitable viewer or editor.</p>
<p>The <code>erc.yml</code> further lists the <em>licenses</em> for each part of the compendium.
Make sure your usage of the </p>
<p>Secondary, but potentially very useful information, can be found in the <code>.erc</code> directory.
It contains log files from the creation of the compendium and metadata in different formats.
These files can be helpful to investigate provenance and authorship of a compendium.</p>
<h4 id="examine-runtime">Examine runtime<a class="headerlink" href="#examine-runtime" title="Permanent link">&para;</a></h4>
<p>The runtime is defined in two levels: a <em>manifest</em> describing the construction of the <em>image</em>.</p>
<p>The manifest, probably a <code>Dockerfile</code>, is readable both for humans and machines.
You can study the specification for the used manifest type and then understand all commands which were used to create the original computational environment.</p>
<p>The image, probably <code>image.tar</code>, is a <a href="https://en.wikipedia.org/wiki/Tar_(computing)">tarball</a> of all files and directories making up the runtime environment.
You can study the image format specification, e.g. <a href="https://github.com/moby/moby/blob/master/image/spec/v1.2.md">Docker Image Specification v1.2.0</a> (assumed for the remainder of this section), to understand the contents of the tarball.
Extract the tarball it to inspect the contained software, be it binaries, source files, or configurations.</p>
<p>The image also contains helpful metadata.
A file <code>manifest.json</code> describes the <a href="http://www.smashinglab.com/docker-image-vs-container-explained/">lay</a><a href="https://medium.com/@jessgreb01/digging-into-docker-layers-c22f948ed612">ers</a> of the image.
The layers themselves are composed of a tarball with the files (<code>layer.tar</code>), which are layed over the lower layers, and metadata.</p>
<p>A file <code>&lt;image hash&gt;.json</code> includes metadata about the architecture and operating system the image was created on, the configuration, and a representation of all steps in the manifest (see the <code>history</code> object) that lead to the creation of the image and its layers.</p>
<h4 id="check">Check<a class="headerlink" href="#check" title="Permanent link">&para;</a></h4>
<p>You may now run the workflow by executing the main file.
You have a choice of potential runtime environments:</p>
<ul>
<li>Your computer, using the locally installed software packages and system packages</li>
<li>Recreate the runtime environment based on the <em>runtime manifest</em></li>
<li>Load and run the <em>runtime image</em> from the ERC</li>
</ul>
<p>The first approach is the most direct one, and if the results are the same, you can be quite sure the workflow is stable and reproducible.
Follow the instructions included in the main file or use well-known commands to compile the main file with the appropriate tools.</p>
<p>The last approach is closest to the environment that the original author had; this approach is used by the reproducibility service.
You must manually extract the reproduced display file from the container after running it.</p>
<p>In all approaches, after you have created the display file, you can compare it to the original, e.g. by opening them side by side.
You can also use tools to assist the comparison:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Diff"><code>diff</code></a> CLI tool can compare the original and reproduced display file, if they are text-based</li>
<li><a href="https://github.com/o2r-project/erc-checker"><code>erc-checker</code></a>, the tool used within the reproducibility service, can be <a href="https://www.npmjs.com/package/erc-checker">installed with npm</a> and run locally to compare both texts and embedded images</li>
</ul>
<h4 id="manipulate-substitute">Manipulate &amp; substitute<a class="headerlink" href="#manipulate-substitute" title="Permanent link">&para;</a></h4>
<p>You can use the bindings specified in the <code>erc.yml</code> to identify core parameters in the main file or other script files of the compendium and manually change these when compiling the document.
Alternatively you can read through all code (starting with the main file), understand it, and change it as whished.
Substitution can also be done manually by changing the file paths in the instructions loading data files.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can initialise a local code repository after extracting the download to trace your changes, e.g. with <a href="https://git-scm.com/docs/git-diff"><code>git diff</code></a>.</p>
</div>
<p>Changing code and data is easiest when using a local environment, but also possible for the included runtime image by using bind mounts when running the image.</p>
<h3 id="detailed-examination-of-code-and-text">Detailed examination of code and text<a class="headerlink" href="#detailed-examination-of-code-and-text" title="Permanent link">&para;</a></h3>
<p>This guide can not go into detail about examining the actual code, data, and text content and therefore ends at this stage.
Such a detailed level of examination is domain-specific.
However, a generic guide for the consumption of (executable) research compendia is published as part of the <a href="https://research-compendium.science/">research-compendium.science</a> initiative:</p>
<blockquote>
<p><em>Nüst, Daniel, Carl Boettiger, and Ben Marwick. 2018. &ldquo;How to read a research compendium.&rdquo; <a href="https://arxiv.org/abs/1806.09525">arXiv:1806.09525</a> [cs.GL].</em></p>
</blockquote>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../template/" class="btn btn-neutral float-right" title="ERC template for authors">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../creation/" class="btn btn-neutral" title="Creation guide for authors"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Licensed under Creative Commons CC0 1.0 Universal License.</p>
    
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/o2r-project/erc-spec/" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../creation/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../template/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme_extra.js" defer></script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
